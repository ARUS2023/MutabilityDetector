= Introduction =

== What is Mutability Detector? == 
Mutability Detector is designed to analyse Java classes and report on whether instances of a given class are immutable. It is intended that Mutability Detector will be usable at runtime or statically.
== What is Mutability Detector *NOT*? ==
  * Heavily used, production ready, well tested, extensively documented. Mutability Detector is very much in a pre-release state. As such it has very limited capability, but there is functionality there. Functionality which may just be useful.
  * A general tool for static code analysis - if you're looking for a tool which does static analysis for a wide range of code defects, you're probably looking for Findbugs.
  * A JSR-305 implementation - the tool does not yet recognise the annotations for concurrency described in that JSR. Thus, Mutability Detector does not look for, or change behaviour on finding, a class annotated with `@Immutable`.

= Getting Started =
Both static analysis and runtime analysis should use the same jar, available from [http://mutability-detector.googlecode.com/files/MutabilityDetector-0.02.jar here]. In the former case the tool is a command line app, in the latter it should be added to your classpath for inclusion in your project.

== Static Analysis ==

An example of how to run it is probably the most useful. If you want to analyse MyCodebase.jar use:

{{{ java -jar MutabilityDetector.jar -classpath path/to/MyCodebase.jar }}}

Mutability Detector can handle jars as seen above, or directories of class files (thanks go to the authors of [http://code.google.com/p/classpath-explorer/ classpath-explorer]). So if your codebase was in the filesystem as directories and .class files, and the directory MyCodebase was the root of that, you could run:

{{{ java -jar MutabilityDetector.jar -classpath path/to/MyCodebase }}}

The output is a list of the analysed classes against the result of asking "Is immutable?", ie. DEFINITELY, DEFINITELY_NOT. Currently there is no way to select individual classes to be analysed with this command. As a workaround I'd suggest piping the output through {{{grep}}}.

The command line has the following usage:
{{{
usage: MutabilityDetector
 -classpath <path>   The classpath to be analysed by Mutability Detector
 -help               print this message
 -r,--report <arg>   Choose what is reported from the analysis. Valid
                     options are [ALL|IMMUTABLE|MUTABLE]. If not
                     specified, or doesn't match an available mode,
                     defaults to 'ALL'
 -v,--verbose        Print details of analysis and reasons for results.
}}}

== Runtime use == 

It is possible to use Mutability Detector at runtime. For example, consider if you have a library which requires that objects passed to it are immutable. On receiving such an object, you can ask Mutability Detector if it is actually immutable.

Check out the code snippet in [http://code.google.com/p/mutability-detector/source/browse/trunk/ClientOfMutabilityDetector/trunk/ClientOfMutabilityDetector/src/main/java/org/mutabilitydetector/runtime/RuntimeAnalysisExample.java this example], which shows correct usage against trunk code.

= Contact =
Contact can be made either by leaving comments or by [mailto:Grundlefleck+md@gmail.com email]